# ğŸ‘» DEVLOG 8/4

### #17.10 Take Photo part 5

- ì‚¬ì§„ì°ê¸° => cacheì—ë§Œ ì €ì¥ë˜ê³ (ì¼ì‹œì ì €ì¥) íŒŒì¼ì‹œìŠ¤í…œì— ì €ì¥ë˜ê³  ìˆì§€ëŠ” x

- MediaLibrary ì´ìš©

1. createAssetAsync : uri ì¨ì¤˜ì•¼í•¨, asset ê°ì²´ ë°˜í™˜

```js
const assets = await MediaLibrary.createAssetAsync(uri);
```

2. saveToLibraryAsync : ì•„ë¬´ ê°ì²´ë„ ë°˜í™˜í•˜ì§€ x

- ì‚¬ì§„ ì €ì¥í•  í•„ìš”ì—†ì´ ë°”ë¡œ ì—…ë¡œë“œí•  ìˆ˜ë„ ìˆìŒ 	

- ë°©ê¸ˆ ì°ì€ ì‚¬ì§„ì„ í™”ë©´ì— ë„ìš°ê¸° (ê³  ì—…ë¡œë“œí•˜ê¸°)

  stateì‚¬ìš©í•´ì„œ takenPhotoê°€ ì¡´ì¬í•˜ë©´ ì‚¬ì§„ì„ ë„ìš°ê³ , ì•„ë‹ˆë©´ ì¹´ë©”ë¼ ì»´í¬ë„ŒíŠ¸ ë„ìš°ê¸°

```js
const [takenPhoto, setTakenPhoto] = useState("");

const takePhoto = async () => {
    ...
	setTakenPhoto(uri);
}

{takenPhoto === "" ? <Camera ì»´í¬ë„ŒíŠ¸> : <Image ì»´í¬ë„ŒíŠ¸>}
```

- Actions(Slider, takePhoto Button) ë„ ë§ˆì°¬ê°€ì§€ë¡œ í•˜ê¸°

```js
{takenPhoto === "" ? (Slider, takePhotoBtn) : (Dismiss, Upload, Save button)}
```



1. Dismiss

```js
const onDismiss = () => setTakenPhoto("");
```



### #17.11 Take Photo part 6

- Uploading Photo
- ë²„íŠ¼ ë‘ê°œ (dismiss, upload) ë¡œ í•˜ê³  uploadë¥¼ ëˆ„ë¥´ë©´ ì €ì¥í• ê±´ì§€ ë¬¼ì–´ë³´ëŠ” ê±¸ë¡œ ë³€ê²½

```js
    const onUpload = () => {
        Alert.alert("Alert", "Do you want to save before uploading?", 
            [  // array
            {
                text: "Yes",
                onPress: () => goToUpload(true),
            }, {
                text: "No, thanks",
                style: "destructive",   // ë¹¨ê°„ìƒ‰ìœ¼ë¡œ í‘œì‹œë¨
                onPress: () => goToUpload(false),
            }]);
    }
    
    
    const goToUpload = async (save) => {
        if (save) {
            // asset ê°ì²´ê°€ í•„ìš”ì—†ê¸° ë•Œë¬¸ì— saveToLibraryAsync ì‚¬ìš©
            await MediaLibrary.saveToLibraryAsync(takenPhoto);  // takenPhotoì— ë°©ê¸ˆ ì°ì€ ì‚¬ì§„ì˜ uri ì €ì¥ë˜ì–´ìˆìŒ
        }

    }
```



### #17.12 Upload Screen part 1

- minor bug : select photo ìŠ¤í¬ë¦°ì—ì„œë„ ì¹´ë©”ë¼ê°€ í•­ìƒ ì¼œì ¸ìˆìŒ / take photo í™”ë©´ì—ì„œ statusBar ë¥¼ ìˆ¨ê²¼ëŠ”ë° select photo í™”ë©´ì—ì„œë„ ìˆ¨ê²¨ì§

  - **focus** ì‚¬ìš©

  ```js
  // TakePhoto.js
  const isFocused = useIsFocused();
  
  {isFocused ? <StatusBar hidden={true} /> : null}
  // focused ë˜ì§€ ì•Šì•˜ì„ ê²½ìš°ì—”(select photo screenì„ ë³´ê³  ìˆëŠ” ê²½ìš°) status bar ì„¤ì •ì´ nullì´ë¯€ë¡œ select photo ìŠ¤í¬ë¦°ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŒ
  ```

  

- upload screen : upload form ì„ ë³´ì—¬ì¤Œ
- ì¤‘ìš” : select photo í™”ë©´ì´ë‘ take photo í™”ë©´ì—ì„œ ë™ì‹œì— ê°™ì€ ìŠ¤í¬ë¦°ì„ ë³´ì—¬ì¤˜ì•¼í•¨

1. LoggedInNav ì— ìƒˆ ìŠ¤íƒ ìŠ¤í¬ë¦° ì¶”ê°€ (UploadForm)
2. selectPhoto ì—ì„œ navigate (next button)
   - ì„ íƒí•œ íŒŒì¼ì˜ uriì„ ê°€ì§€ê³  ê°€ì•¼í•¨
   - uploadForm ì˜ route.paramsë¡œ í™•ì¸

```js
<TouchableOpacity onPress={() => navigation.navigate("UploadForm", {
                file : chosenPhoto,
            })}>
```

3. takePhotoì—ì„œ navigate
   - ë°©ê¸ˆ ì°ì€ ì‚¬ì§„ì˜ uri ê°€ì§€ê³  ê°

```js
    const goToUpload = async (save) => {
        if (save) {
            await MediaLibrary.saveToLibraryAsync(takenPhoto);
        }
        navigation.navigate("UploadForm",{
            file : takenPhoto,
        });
    }
```

- uploadForm ìŠ¤í¬ë¦°ì—ë§Œ í—¤ë” ë„£ê¸°

```js
 <Stack.Navigator screenOptions={{ presentation: "modal" }}>
            <Stack.Screen name="Tabs" options={{ headerShown: false }} component={TabsNav} />
            <Stack.Screen name="Upload" options={{ headerShown: false }} component={UploadNav} />
                // ì–˜ë„¤ ë‘˜ë§Œ ì˜µì…˜ ì¤Œ
            <Stack.Screen name="UploadForm" component={UploadForm} />
        </Stack.Navigator>
```



