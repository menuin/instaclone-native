# ğŸ¢ DEVLOG 7/30



### #15.0 Tab Navigator

- building tab navigation
- 5ê°€ì§€ íƒ­ : home, search, photo, likes, user profile

```js
export default function LoggedInNav() {
    return (
        <Tabs.Navigator>
            <Tabs.Screen name="Feed" component={Feed} />
            <Tabs.Screen name="Search" component={Search} />
            <Tabs.Screen name="Notifications" component={Notifications} />
            <Tabs.Screen name="Profile" component={Profile} />
        </Tabs.Navigator>
    )
}
```

- styling 
  - tabBarOptionsëŠ” deprecated. https://reactnavigation.org/docs/bottom-tab-navigator/ ì°¸ê³ 

```js
<Tabs.Navigator
screenOptions={{
               tabBarStyle: {
               backgroundColor: "black",
               borderTopColor: "rgba(255,255,255,0.3)",
              },
    tabBarActiveTintColor: "white",
   	tabBarShowLabel: false,

}}
    >
```



- screen props
  - tabBarIconì˜ function ì˜ propì˜ colorëŠ” tabBarActiveTintColorê³¼ ê°™ì€ ìƒ‰ì„

```js
<Tabs.Screen name="Feed" component={Feed} options={{
                tabBarIcon: ({ focused, color, size }) => <Ionicons name="home" color={color} />
            }} />
```



### #15.1 Tab Navigator part 2

- ì¹´ë©”ë¼ (ê³ ìŠ¤íŠ¸ íƒ­)
- Iconì„ TabIcon ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬



### #15.2 Stack and Tabs

- tab ë„¤ë¹„ê²Œì´ì…˜ì— ìˆëŠ” ëª¨ë“  tabì— ëŒ€í•´ì„œ stack ë„¤ë¹„ê²Œì´í„°ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤ (ê° íƒ­ë§ˆë‹¤ ìŠ¤íƒ ë„¤ë¹„ê²Œì´ì…˜)
- ê° ìŠ¤íƒ ë„¤ë¹„ê²Œì´ì…˜ì€ ì²« í™”ë©´ì„ ì œì™¸í•˜ê³  ë™ì¼í•œ í™”ë©´ë“¤ì„ ê°€ì§(ë˜‘ê°™ì€ ìŠ¤íƒì„ ê³µìœ )(ex. ì–´ë–¤ íƒ­ì´ë“  ë‹¤ë¥¸ ì‚¬ëŒì˜ í”„ë¡œí•„ í˜ì´ì§€ë¡œ ì´ë™í•  ìˆ˜ ìˆìŒ)

```js
// components/nav/StackNavFactory.js
const Stack = createStackNavigator();
    export default function StackNavFactory({screenName}){
        return (
            // ë§¨ ìœ—í™”ë©´ì€ ì–´ë–¤ íƒ­ì´ëƒì— ë”°ë¼ ë‹¬ë¼ì§
            <Stack.Navigator>
                {screenName === "Feed" ? (<Stack.Screen name={"Feed"} component={Feed} />
                ) : null}
                {screenName === "Search" ? (<Stack.Screen name={"Search"} component={Search} />
                ) : null}
                {screenName === "Notifications" ? (<Stack.Screen name={"Notifications"} component={Notifications} />
                ) : null}
                {screenName === "Me" ? (<Stack.Screen name={"Me"} component={Me} />
                ) : null}
                <Stack.Screen name="Profile" component={Profile} />
                <Stack.Screen name="Photo" component={Photo} />
            </Stack.Navigator>
        )
}
```

- LoggedInNav ìˆ˜ì •

```js
<Tabs.Screen name="Feed"  options={{
	tabBarIcon: ({ focused, color, size }) => (
		<TabIcon iconName={"home"} color={color} focused={focused} />
	)
	}} >  
    // children : componentë¡œ propsë¥¼ ë³´ë‚´ì•¼í•œë‹¤ë©´ ì´ë ‡ê²Œ ì“°ëŠ”ê²Œ ë‚˜ìŒ
	{() => <StackNavFactory screenName="Feed" />}  
</Tabs.Screen>
```



ì—¬ê¸° ë’·ë¶€ë¶„ ì½”ë“œ ì •ë¦¬

- ğŸ’¦ tab screenë„ í—¤ë”ê°€ ìˆëŠ”ë° stack screenì´ë‘ ê²¹ì³ì„œ í—¤ë”ê°€ ë‘ê°œ ë‚˜íƒ€ë‚˜ëŠ” ì˜¤ë¥˜ -> Tabs.Navigatorì— ì˜µì…˜ì£¼ê¸°

  ```js
  headerShown: false,
  ```



### #15.3 Stack and Tabs part 2

- ëª¨ë“  íƒ­ì—ì„œ profile, photo ìŠ¤í¬ë¦°ì„ ê³µìœ 
- ìŠ¤í¬ë¦° ìŠ¤íƒ€ì¼ ë³€ê²½



### #15.4 Apollo Auth

- í—¤ë” ì¸ìŠ¤íƒ€ê·¸ë¨ ë¡œê³ ë¡œ ë°”ê¾¸ê¸°
- ë°±ì—”ë“œë¡œ í† í° ë³´ë‚´ê¸° (httplink + authlink)

```js
const httpLink = createHttpLink({
    uri: "http://localhost:4000/graphql",

});
const authLink = setContext((_, { headers }) => {
    return {
        headers: {
            ...headers,
            token: tokenVar()
        }
    }
});
```

- FEED_QUERY (FRAGMENTí¬í•¨) : ì½”ë“œ ì°¸ê³ 



### #15.5 FlatList

- ì¼ë‹¨ ScreenLayout ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸° : ëª¨ë“  ìŠ¤í¬ë¦°ì—ì„œ ì ìš©, loadingIndicator -> ë¡œë”© í›„ children ë Œë”ë§

- feed list ë§Œë“¤ê¸° -> FlatList 
- ë¦¬ìŠ¤íŠ¸ of ë°ì´í„°ë¥¼ í•œë²ˆì— ë¡œë”©í•˜ë©´ ë¹„íš¨ìœ¨ì 

- **Scroll view** : ëª¨ë“  ë¦¬ì•¡íŠ¸ child componentë¥¼ **í•œë²ˆì—** ë Œë”ë§í•œë‹¤ , horizontalë¡œë„ ê°€ëŠ¥
  - ìŠ¤í¬ë¡¤ë·° ìƒì— ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ ë¡œë”©í•˜ëŠ” ê±´ ì¢‹ì€ ë°©ë²• x

```js
<ScrollView>
    <View style={{ height: 20000, backgroundColor: "blue" }}><Text>Im super big</Text></View>
</ScrollView>
```

- **FlatList**
  - í™”ë©´ ìƒì— ì»´í¬ë„ŒíŠ¸ê°€ ì—†ìœ¼ë©´ ë Œë”ë§í•˜ì§€ ì•ŠìŒ
  - keyExtractor : uniqueí•œ ê°’
  - renderItem : render function

```js
<FlatList
    data={data?.seeFeed}
    keyExtractor={photo => "" + photo.id}
	// photo.idë¥¼ stringìœ¼ë¡œ ë°”ê¿”ì•¼ ì—ëŸ¬ì•ˆë‚¨
    renderItem={renderPhoto}
/>
```



### #15.6 Photo part 1

- photo component êµ¬í˜„
- Notification, Profile ìŠ¤ìŠ¤ë¡œ í•˜ê¸°
  - notification ì°¸ê³  https://docs.expo.io/versions/latest/sdk/notifications/

1, ë¼ˆëŒ€ì§œê¸°

```js
export default function Photo({}){
    return (
        <Container>
            <Header>
                <UserAvatar />
                <Username></Username>
            </Header>

            <File />
            <Actions>
                <Action />  
                <Action />
            </Actions>
            <Likes></Likes>
            <Caption>
                <Username></Username>
                <CaptionText></CaptionText>
            </Caption>
        </Container>
    )
}
```

2. ë°ì´í„° ì¢…ë¥˜ ì •ì˜

```js
const Container = styled.View``;
const Header = styled.View``;
const UserAvatar = styled.Image``;
const Username = styled.Text``;
const File = styled.Image``;
const Actions = styled.View``;
const Action = styled.TouchableOpacity``;
const Caption = styled.View``;
const CaptionText = styled.Text``;
const Likes = styled.Text``;
```

3. propTypes



- File ë¶€ë¶„ ì„¤ëª…

  - ì´ë¯¸ì§€ê°€ ì›¹ì—ì„œ ì˜¤ëŠ”ê°€ ë‚´ë¶€ íŒŒì¼ ì‹œìŠ¤í…œì—ì„œ ì˜¤ëŠ”ê°€ì— ë”°ë¼ ê°€ì ¸ì˜¤ëŠ” ë°©ì‹ ë‹¤ë¦„

  1. ì›¹ì—ì„œ

     - ì›¹ì—ì„œ ì‚¬ì§„ ë¶ˆëŸ¬ì˜¤ë ¤ë©´ width, height ê°’ì´ í•„ìˆ˜ì ìœ¼ë¡œ í•„ìš”í•¨

     - ì´ë¯¸ì§€ë§ˆë‹¤ ì‚¬ì´ì¦ˆê°€ ë‹¤ë¥´ê¸°ë•Œë¬¸ì— í˜„ì¬ì°½ì˜ widthì— ë§ì¶”ê¸°ë¡œ í•¨

       `const { width, height } = useWindowDimensions();`

  ```js
  <File 
  	style={{
             width,
             height: height-500,  // ì–˜ëŠ” ì ìš©ì´ ì•ˆë˜ëŠ” ê²ƒ ê°™ìŒ... ì™œì§€... height + ë¡œ í•´ì•¼ ë´ì¤„ë§Œí•˜ê²Œ ë‚˜ì˜´..
              }} 
      source={{ uri: file }} />
  ```

  

- ìŠ¤í¬ë¡¤ë°” ì—†ì• ê¸°

```js
// Feed.js
<FlatList
	showsVerticalScrollIndicator={false}  // ì¶”ê°€
/>
```



### #15.7 Photo part 2

- ì´ë¯¸ì§€ ì‚¬ì´ì¦ˆ ìœ ë™ì ìœ¼ë¡œ í•˜ê¸°(?)

```js
const [imageHeight, setImageHeight] = useState(height + 400) // ë””í´íŠ¸ê°’ ì„¤ì •
useEffect(() => {
    Image.getSize(file, (width, height) => {
        // getSizeê°€ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œë˜ë©´ ì‹¤í–‰í•  í•¨ìˆ˜
        setImageHeight(height)
    })
}, [file])
```

- ê·¼ë° ì´ëŸ¬ë©´ ì‚¬ì§„ì˜ ì‹¤ì œì‚¬ì´ì¦ˆê°€ heightë¡œ ë˜ì–´ì„œ (ê·¼ë° widthëŠ” í˜„ì¬ ì°½ì˜ widthì— ë§ì¶°ì ¸ ìˆì–´ì„œ) í° ì´ë¯¸ì§€ë¥¼ ì“°ë©´ ìƒí•˜ë¡œ ê³µê°„ì´ ë‚¨ìŒ

  ```js
  <File
  	resizeMode="cover" // ì‚¬ì§„ì„ ì‹¤ì œì‚¬ì´ì¦ˆë¡œ ë³´ì—¬ì¤Œ
  />
  ```

  

- header ë””ìì¸ : ì½”ë“œ ì°¸ê³ 

- usernameì´ë‚˜ avatarë¥¼ í´ë¦­í–ˆì„ ë•Œ profileë¡œ navigate

  - headerë¥¼ touchable opacityë¡œ ë§Œë“¤ê¸°

  - ê·¼ë° PhotoëŠ” ìŠ¤í¬ë¦° ìœ„ì— ìˆëŠ” ì»´í¬ë„ŒíŠ¸ë¼ navigation propì´ ì—†ìŒ

    ì˜µì…˜ 1. FeedëŠ” navigation propì„ ê°–ê³  ìˆìœ¼ë‹ˆ ë°‘ìœ¼ë¡œ ë‚´ë ¤ë³´ë‚¸ë‹¤

    ì˜µì…˜ 2. useNavigation ì´ìš© << ì´ê²Œ ë‚˜ìŒ

    ```js
    const navigation = useNavigation();
    
    <Header onPress={() => navigation.navigate("Profile")}>
    ```

    

