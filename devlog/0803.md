# 🍂 DEVLOG 8/3

### #17.2 Select Photo part 1

- UploadNav의 select 헤더 다듬기 (코드 참고)

- selectPhoto 컴포넌트 수정
  1. 유저가 고른 사진을 상단에 띄움
  2. 갤러리에 있는 모든 사진들을 하단에 나열



### #17.3 Select Photo part 2

- 갤러리 사진 가져오기

- expo api 사용 

  expo - MediaLibrary

  https://docs.expo.dev/versions/latest/sdk/media-library/




1. 갤러리 접근 권한 요청하기
   - getPermissionsAsync, requestPermissionsAsync

```js
// SelectPhoto.js
    const [ok, setOk] = useState(false);

    const getPermissions = async () => {
        const { accessPrivileges, canAskAgain } = await MediaLibrary.getPermissionsAsync();
        if (accessPrivileges === "none" && canAskAgain) {  // 권한을 요청하지 않아서 access권한이 없는 경우
            const permissions = await MediaLibrary.requestPermissionsAsync(); // 권한 요청
            if (accessPrivileges !== "none"){
                setOk(true);
            }
        } else if (accessPrivileges !== "none"){
            setOk(true);
        }
    }
    useEffect(() => {
        getPermissions();
    }, []) // 한번만 실행
```



2. 갤러리에서 사진 가져오기
   - getAssetsAsync

```js
const [photos, setPhotos] = useState([]); // array of photos (default : empty array)

const getPhotos = async () => {
    if (ok) {
        const {assets:photos} = await MediaLibrary.getAssetsAsync();  // array of photos
        setPhotos(photos)
    }
}

useEffect(() => {
    getPermissions();
    getPhotos();
}, [])
```

