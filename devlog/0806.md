# 🍳 DEVLOG 8/6

### #18.1 Rooms Screen part 1

- 쿼리 작성(fragment이용),  rooms screen 만들기 (screenLayout, flatList) : 코드 참고

```js
<FlatList
    data={data?.seeRooms} // data는 array형식이어야 하기때문에 data.seeRooms 를 넣음
    keyExtractor={room => "" + room.id}
    renderItem={renderItem}
/>
```



### #18.2 Rooms Screen part 2

- Rooms 스타일링

- 상대 username 알아내기 : useMe hook 사용

```js
const {data : meData} = useMe();
const renderItem = ({ item: room }) => {
        const notMe = room.users.find(
            (user) => user.username !== meData?.me?.username
        )
```

- unreadDot >> 안읽은 메세지가 있을때만

- 새로고침, 스크롤 >> 알아서 해보기



### #18.3 Room Screen part 1

- Rooms를 스크린에서 분리 : 컴포넌트로 만들기(components/rooms/RoomItem.js)

```js
// Rooms.js
const renderItem = ({ item: room }) => (
        <RoomItem {...room} />
    );
```

- rooms -> room navigation

```js
const goToRoom = () => navigation.navigate("Room", {
        id,
        talkingTo,
    });
```

- Room.js 작성 (seeRoom 쿼리)



### #18.4 Room Screen part 2

- room screen layout

- FlatList inverted : 가장 최근의 메세지가 가장 밑으로 와야함

```js
<FlatList
                inverted
            />
```

- (메세지 작성) input
  - 키보드가 올라갔을 때 다 위로 같이 올리기 : 전부 keyboard avoiding view 안에 넣기

```js
<KeyboardAvoidingView style={{ flex: 1, }} behavior="padding" keyboardVerticalOffset={160}>
```

- `behavior="height"` : 들려올라간 만큼 빈공간됨 (하얀색 배경)



### #18.5 Room Screen part 3

- 말풍선 스타일링 
- border-radius 안먹으면 overflow : hidden 추가 (자식태그가 부모태그 밖으로 삐져나오는 오류)



- 들어오는 메세지는 왼쪽에, 나가는 메세지는 오른쪽에

  - `flex-direction : row-reverse` 
  - 구별하기 : messageContainer에 prop 주기

  ```js
  <MessageContainer outgoing={message.user.username !== route?.params?.talkingTo?.username} >
  ```

  ```js
  const MessageContainer = styled.View`
      flex-direction: ${props => props.outgoing ? "row-reverse" : "row"};
  `;
  ```



- mutation 작성: sendMessage
